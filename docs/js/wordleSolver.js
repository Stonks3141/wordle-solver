let currentWord,table=document.getElementById("wordletable"),currentRow=0;fetch("wordle.json").then(e=>e.json()).then(e=>currentWord=e);for(let e=0;e<6;e++){table.rows[e].cells[5].onclick=function(){nextRow(this)};for(let t=0;t<5;t++)table.rows[e].cells[t].onclick=function(){cycleColor(this)}}function cycleColor(e){e.parentNode.rowIndex==currentRow&&(e.classList.contains("gray")?e.classList.replace("gray","yellow"):e.classList.contains("yellow")?e.classList.replace("yellow","green"):e.classList.contains("green")&&e.classList.replace("green","gray"))}function nextRow(e){if(0==e.hasAttribute("hidden")){let t=e.parentNode.rowIndex+1,r=getResult(t-1);if("22222"==r)return void e.setAttribute("hidden","");if(!(currentWord=currentWord[Object.keys(currentWord)[0]]).hasOwnProperty(r))return void alert("Invalid input");currentWord=currentWord[r],e.setAttribute("hidden",""),t<5?(table.rows[t].cells[5].removeAttribute("hidden"),currentRow=t):currentRow=6;for(let e=0;e<5;e++)table.rows[t].cells[e].classList.replace("empty","gray");nextWord(t-1,r)}}function writeWord(e,t){for(let r=0;r<5;r++)table.rows[t].cells[r].innerHTML=e[r]}function nextWord(e,t){if("string"==typeof currentWord){writeWord(currentWord,e+1);for(let t=0;t<5;t++)table.rows[e+1].cells[t].classList.replace("gray","green");currentRow=6,table.rows[e+1].cells[5].setAttribute("hidden","")}else writeWord(Object.keys(currentWord)[0],e+1)}function getResult(e){let t="";for(let r=0;r<5;r++){let n=table.rows[e].cells[r].classList;n.contains("gray")?t+="0":n.contains("yellow")?t+="1":n.contains("green")&&(t+="2")}return t}
